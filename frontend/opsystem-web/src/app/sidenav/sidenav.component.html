<mat-sidenav-container style="height: 100%;">
  <mat-sidenav #drawer mode="side">
    <mat-toolbar>
      <mat-toolbar-row>
        <span>Side menu</span>
        <span class="example-spacer"></span>
        <button id="closeButton" type="button" aria-label="Toggle sidenav" mat-icon-button
                (click)="drawer.toggle()">
          <mat-icon aria-label="Side nav toggle icon">clear</mat-icon>
        </button>
      </mat-toolbar-row>
    </mat-toolbar>

    @if (!isLogged) {
      <mat-nav-list>
        <a mat-list-item routerLink="create/user">
          <div>Create an Account</div>
        </a>
       </mat-nav-list>
    } @else {

    <mat-nav-list>
      <a mat-list-item routerLink="create/user">
        <div>Create a Child</div>
      </a>
    </mat-nav-list>
    <mat-nav-list>
      <a mat-list-item routerLink="apps">
        <div>Browse apps</div>
      </a>
    </mat-nav-list>
    <mat-nav-list>
      <a mat-list-item routerLink="installed">
        <div>Installed apps</div>
      </a>
    </mat-nav-list>
    <mat-nav-list>
      <a mat-list-item routerLink="create/app">
        <div>Create app</div>
      </a>
    </mat-nav-list>
    <mat-nav-list>
      <button mat-raised-button (click)="wallpaperList.showModal()">Change wallpaper</button>
    </mat-nav-list>
    <mat-nav-list>
      <div style="position: fixed;bottom: 25px">Current wallpaper: {{currentUser.wallpapers![currentUser.currentWallpaperIndex!]}}</div>
    </mat-nav-list>

    }
  </mat-sidenav>

  <mat-sidenav-content>
    <mat-toolbar color="primary">
      @if (!drawer.opened) {
      <button type="button" aria-label="Toggle sidenav" mat-icon-button (click)="drawer.toggle()">
        <mat-icon aria-label="Side nav toggle icon">menu</mat-icon>
      </button>
      }
      @if (isLogged) {
        <div>{{currentUser.username}}'s op system</div>
      }
    </mat-toolbar>
    <div class="content">
      <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>

<dialog #wallpaperList style="z-index: 500">
  <form method="dialog">
    <div>
      <mat-form-field>
        <mat-label>Wallpapers</mat-label>
        <mat-select>
          @for (wallpaper of currentUser.wallpapers; track wallpaper; let index = $index) {
            @if (index === currentUser.currentWallpaperIndex) {
              <mat-option [value]="index">{{wallpaper}}</mat-option>
            }
            @else {
              <mat-option [value]="index" disabled>{{wallpaper}}</mat-option>
            }
          }
        </mat-select>
      </mat-form-field>
    </div>
  </form>

</dialog>
